<HTML>
<HEAD>
<TITLE>Security Review of ispell</TITLE>
</HEAD>
<BODY>
<CENTER>
<H1> Security Review of ispell</H1>
</CENTER>
<P>
<H2>Introduction</H2>
<P>
You work for WebGlomerate.com, who is building a new service for clients.  It is a network-facing system that allows anyone to set up an account and create and edit text files, which will be uploaded to a server.  
Various features then allow sharing of these text files with other users.  Depending on 
discretionary access permissions settable by the file's owner, other users can view, download,
or even edit the files themselves.  
<P>
Your
particular assignment concerns the choice that the design team has made on handling
spell checking of the uploaded text files.  They have decided to use a well-known
open source program called <A HREF="https://en.wikipedia.org/wiki/Ispell">ispell</A>.  Before a text file can be  uploaded to the
server, it will be run through ispell, which will then provide an interactive
environment for finding and correcting spelling mistakes.  
The site also offers an on-line editing mode for text files that have already
been uploaded.  Exiting the editing mode will also automatically invoke ispell on 
the newly updated version of the file. 
<P>
The choice of ispell might or might not be a good one, but that's a decision already
made.  (You should probably get used to living with other people's decisions on key
elements of a system you're working on, including decisions you disagree with.)  
Your task is to perform a security review on ispell, particularly in this
use, as part of the overall system.  The rest of the system is under development, and
you can't get access to a running version of it or its source code.  However,
ispell's source is readily available and can be run on a wide range of platforms.
Working on the assumption that the environment from which ispell is run is essentially
a browser window displaying and permitting editing of the text in ispell, just as if it were a
remote terminal running the program, your team is to perform the most complete security review possible.
<P>
The intended use of the web site is that a user can upload an arbitrary text file
to the site.  On upload or completion of editing, ispell will be run on the text
file.  ispell will be run in a separate process on the same server
that is providing access to the text file.  While the text file must only contain
ASCII characters (and is scanned on upload and any edit to the online version to ensure
that it does, before it is submitted to ispell), markup languages or code that 
only uses such characters is allowable.  The site will not render the markup 
language or run the code, but those sorts of text files can be stored.  You might want to
consider scenarios in which the scan of the upload fails to filter out non-ASCII characters.
Generally, you might want to consider what will happen if the overall system doesn't behave
quite the way it's outlined in this description, since that happens all too often in complex
systems in the real world.
<P>
The system will run on a set of servers running the most recent release of Red Hat 
Linux.  As new releases become stable, the Linux version will be updated.  Similarly, the version of ispell will be the most recent release of that software that runs on the version of Linux on the servers, and will be quickly updated as new ispell versions are released.  Other software components are either custom-built by WebGlomorate or may be changed out for new releases or other pieces of software with compatible behavior, so you should make no assumptions about them.
<P>
For the purpose of the project, use the latest version of ispell located at 
<A HREF="https://www.cs.hmc.edu/~geoff/ispell.html">the web site of Geoff Kuenning</A>, who currently maintains the code.
<P>
The required submission for the project will be a written report on what you did to 
evaluate the security of this system component and what you found out by doing so.  You
are not required to submit any other documents, code, or materials, though if you can
better explain something or demonstrate a particular behavior with a test program, a sample
input file, screen shots, output of a code analysis program, or some other evidence
beyond the report, you may also submit that material.  The team should submit a single report,
with all team members' names listed on it.  Other materials you include need not be tagged
with all members' identity, provided it is clear which team submitted them.  Please do not
submit unlabeled files from multiple different members' CCLE accounts, as we may be
unable to assign them to the correct team.
<P>
<H2>Performing the project</H2>
<P>
<H3>Planning and executing your project</H3>
<P>
We strongly recommend that your first step should be to create a plan about how you are going
to perform this project.  The project is flexibly defined and open ended, so you can approach
it in many different ways.  The wrong thing to do is to just jump in and start poking around
at the code or running the system and trying things out.  Consider what will be the most 
fruitful approaches to evaluating the security of ispell in this context, taking into account
constraints of your schedule, the manpower of your team, your existing skills, availability of
possible tools, and your experience in how long it takes to get things done.  A well organized
effort will produce better results than a bunch of shots in the dark.  Take some time up front
to plan what you will do, when you will do it, how long it will take, who will perform each
element of the work, and what kind of results you expect to get.  Be sure to leave time at the end
to write up your results in a final report.
<P>
While a preliminary plan is key to success, you should also be prepared to be flexible in its
execution.  Remember, the goal is not to check off items on your plan list, but to learn about
the security status of ispell in the proposed system.  If a planned approach proves infeasible,
will clearly take too long, or is not producing useful results, be prepared to alter your plan.
But do so knowingly, with clear intention to change your approach, not haphazardly.  Changes in
the plan should be team decisions.
<P>
Be sure to maintain good records of what you did.  These will prove invaluable in writing the
report.  It's important not merely to record security problems you find, but to record the
work you did.  Being able to itemize the elements of the code you examined, for example, is just
as important as pointing out a buffer overflow in one particular routine.
<P>
We are not mandating what approaches you take to evaluate the security of the system, nor
insisting that the overall strategy match one discussed in lectures or in the readings.  You
should be able to clearly describe in your report what your strategy was, why you chose that 
strategy, and how the strategy played out as you performed your evaluation.
<P>
<H3>Possible evaluation approaches</H3>
<P>
What should you do to perform this project?  That is up to you.  There are many techniques
for evaluating the security of a program or system component, many of which are available to
you.  Your overall strategy could rely on one or several of them.  A few are listed below, 
but it is NOT required that you use all of them (or, for that
matter, any of them), provided your report is based on a sound strategy for evaluating the
security of this system component.  
<P>
<UL>
<LI>A web search for known or likely security problems.  It might be (or might not be) that
there are known security problems with the current version of ispell, or with its use in
the way planned in this system, or with some necessary library or other supporting 
component.  If so, a sufficiently thorough web search might uncover them.  Only problems
directly related to ispell and its intended use are relevant, though. So, for example, finding
generic problems with a particular release of Linux that might be used in the system or
with libc, which is used ubiquitously in Linux programs, is not relevant and is out of
scope for this investigation. NOTE: it is unlikely that a web search alone will be a sufficient
security review strategy for this project, though it could be one element of a good strategy.</LI>
<P>
<LI>Code review by hand.  Version 3.4.00 of ispell contains nearly 14,000 lines of code.  That's
a fair amount of code, but performing some reasonable amount of code review on it with
a good sized team is not impossible.  Even if a full code review does not seem worth the
required effort, you might consider code review techniques that focus attention on smaller
subsets of the code.  For this project, the point of such a review is to find security-related
bugs, not non-security bugs, inefficient implementation choices, inconsistencies in coding
style, or other possible shortcomings in the code.  Only code that definitely contains
such problems, or at least suggests strong possibilities of them, would be relevant here.  
<P> 
One exception to the above is poor coding style that, in the existing implementation, does not contain security flaws, but is
likely to cause such problems when changes are made to either ispell itself or to the overall
system.  One
example might be a general routine that does not check the length of a string provided to
it as a parameter, but where all existing calls to that routine currently provide only strings of safe
length.  While no buffer overflow is currently possible, if another call to the routine is
added and care is not taken with that call's parameters, a buffer overflow might become 
possible.  For such cases, be sure to include a thorough explanation of
precisely why the way the code is written may lead to security flaws in the future.  </LI>
<P>
<LI>Code review using automated tools.  Tools exist that can be run on source code and can provide
some kind of insight into the likely security of that code.   This wikipedia page on <A HREF="https://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis">tools for static code analysis</A> 
lists a large number of tools that can be applied to source code to check for various problems or
characteristics.  OWASP also provides a <A HREF="https://www.owasp.org/index.php/Source_Code_Analysis_Tools"> set of source code analysis tools</A>, specifically for security analysis.  Some of these
tools are language specific, some do not directly relate to security problems, 
some might not be readily or freely available, and they are likely to be of varying quality and usability.  You could choose to use some of these, or other tools, or tools you yourself write, to
analyze the security of ispell's code in an automated fashion.
</LI>
<P>
<LI>Formal analysis of the code.  It is possible to use formal analysis techniques that prove
certain properties of code.  This approach is really a sub-approach of general code analysis,
but it focuses on provable properties, rather than finding issues in coding that frequently 
cause problems, locating known security bugs in code, or describing general characteristics of code, such as its complexity.  Such techniques have
a reputation for being difficult and expensive (computationally and in human effort), but you
certainly could take this approach if you chose.  The Wikipedia page mentioned above has a
special <A HREF="https://en.wikipedia.org/wiki/List_of_tools_for_static_code_analysis#Formal_methods_tools">subsection on formal methods tools</A> that could give you a place to start, if this
approach seems promising to you.  
</LI>
<P>
<LI>Design review.  There is not, to my knowledge, any formal design document for ispell.
One can deduce elements of its design from some of its documentation, and a high level
perusal of its code will offer further hints about its design.  One could use this and
any other available information to build a model of some kind of the design of the program, and perhaps could even extend the model, to some extent, to how it fits in the overall 
system, limited by the vague available knowledge of that system.  Some forms of review
of that design might point out serious security concerns.</LI>
<P>
<LI>Live testing.  The overall system is unavailable, but ispell can be run in stand-alone
mode.  Your team could, if this direction seemed fruitful, compile the code and run it in
an environment as much like the designed one as possible.  (Read the instructions in the README file that is part of the ispell gz package and follow them carefully to make a working copy of the program.  By default, the program installs the executable and associated data files under /usr/local, and you might not have write permission for that directory on your testing machine.  Simple changes in the local.h file used to compile the program will allow you to install it anywhere you please, though.  Note that, if you think it's worthwhile, you can add print statements or otherwise output information from the program, since you have the source code available to you.)  You could use various approaches
to test it for vulnerabilities, such as buffer overflows.  You could use <A HREF="https://en.wikipedia.org/wiki/Fuzzing">fuzz testing</A> on any
inputs it allows to see if problems pop up.  You could thoroughly exercise any combination
of allowable flags to see if incompatibilities lead to vulnerabilities.  You could determine
if an attacker can somehow escape from merely checking spelling and instead run a wider
range of commands.  You could test to see if features of the program could be used to
run some kind of denial of service attack, perhaps based on immense overuse of processing resources or memory, given particular inputs or other circumstances.  As with other approaches,
only bugs with a security implication would be relevant, so deceiving ispell into accepting a misspelled word is probably not relevant, for example.  Any security problems you 
discover through testing should be demonstrated or described in sufficient detail that
their implications are obvious. </LI>
</UL>
<P>
We do not mandate that you use any of these approaches.  Part of the challenge of this project
will be to figure out the best approach to use.   Think about your options, make the best informed
decision you can on how to proceed, and be prepared to defend your choices.
<P>
One final note on approaches: here's an approach you are NOT to try.  Do not bother Prof. Kuenning
with questions or complaints about this project.  If you find a genuine bug in the code, there
is information on his ispell web page describing how to report it, but otherwise leave him alone.
He's a former student and a friend of mine, so if a bunch of you start harrassing him about this
project, he will undoubtedly complain about it to me, and I will not be amused.
<P>
<H2>Your project report</H2>
<P>
Regardless of what methods you use, you must submit a written report describing your approach
and what you learned about the security of ispell for the intended purpose of this system.
Your report should contain at least the following sections:
<UL>
<LI>Summary.  A brief summary of your findings, including the approach(es) you took and what you learned.  This should be at a high level (e.g., "We chose to perform a design review based on documents
found on the web, followed by live testing using the following methods") and should include some
conclusion about the security of the system (e.g., "Our result suggest ispell will be sufficiently
secure for this use" or "Our analysis reveals fatal security flaws in using ispell in this system" 
or a statement of similar nature). </LI>
<LI>A description of your original plan for the security evaluation, including steps to be taken,
tools or approaches used, work assignments, and a schedule.  Since it is likely that your plan
required some adjustments, you should discuss the degree to which you followed your plan versus
deviating from it, as well as explanations for such deviations. </LI>
<LI>Results.  You should describe the results of your security evaluation, providing sufficient
details to justify any conclusions you reach.  This section should be significantly more
extensive than the summary, containing a great deal more detail.  If, for example, you found a
dangerous race condition in the code, you should describe how you found it, what the security 
implications are, and suggest approaches for fixing it or ensuring that it is not exploited.
</LI>
<LI>Recommendations for future evaluations.  If time and resources did not permit you to study
the system as fully as you feel was desirable, you should discuss how future efforts to better
understand the security of the system should be directed.  You should also discuss conditions
under which a fresh review might be required, such as release of a new version of ispell or
significant changes in how ispell interacts with the overall system.  </LI>
<LI>Lessons learned by performing the security evaluation.  Beyond learning something about the
security of ispell in a particular context, we hope you will learn something about designing
secure systems, secure coding, and evaluating the security of systems.  In this section, discuss
what you have learned. </LI>
<LI>Work breakdown.  Indicate exactly which elements of the report and work required to produce
it were performed by each team member.</LI>
<LI>Supplementary materials.  If your analysis produced useful artifacts (such as automated 
reports, screen shots demonstrating problems, scripts used to test functionality, etc.), include
these in appendices, where possible.  For things that are not easily embedded in a report (such as
a video demonstrating how to exploit a security flaw), 
upload them as separate files when you submit the report.  You can also provide links to
supplementary materials, but if you do, make sure that the materials are in a location that can be accessed by others, not in a private area.  Make sure that your
supplementary material section indicates which files are uploaded as part of your project, which links
are associated with your project,  and what each file or link represents.
</LI>
</UL>
<P>
Your group should submit a single joint report on the project.  Use the CCLE web site to submit your report in PDF form.  Be sure it includes the names of all team members.






<P>
